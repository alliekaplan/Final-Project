import requests

networks = requests.get("http://api.citybik.es/v2/networks").json()['networks']
us_networks = [n for n in networks if n['location']['country'] == 'US'] #get US cities only
bike_availability = {}

#get the number of available bikes
for net in us_networks:
    network_id = net['id']
    city = net['location']['city']
    url = f"http://api.citybik.es/v2/networks/{network_id}"
    data = requests.get(url).json()
    stations = data['network']['stations']
    total_bikes = sum(station['free_bikes'] or 0 for station in stations)
    bike_availability[city] = total_bikes
print(bike_availability)

